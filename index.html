<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Hub - Breaking Cycles</title>
    <style>
        :root{
            --primary-1: #667eea;
            --primary-2: #764ba2;
            --text: #2c3e50;
            --muted: #7f8c8d;
            --card-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 clamp(1rem, 2vw, 2rem);
            gap: 1rem;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-1);
            text-decoration: none;
            display:flex;
            align-items:center;
            gap: .5rem;
        }

        /* Nav toggle (hamburger) */
        .nav-toggle {
          display: none;
          background: transparent;
          border: none;
          font-size: 1.6rem;
          cursor: pointer;
          color: var(--text);
          padding: .25rem .5rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s ease;
            padding: .4rem .6rem;
            border-radius: 8px;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-1);
            background: rgba(102,126,234,0.06);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn-login, .btn-signup {
            background: transparent;
            border: 1px solid rgba(0,0,0,0.06);
            padding: .5rem 1rem;
            border-radius: 999px;
            cursor:pointer;
            background: white;
        }

        /* Header */
        .page-header {
            text-align: center;
            padding: clamp(2rem, 6vw, 4rem) clamp(1rem, 3vw, 2rem);
            background: linear-gradient(135deg, var(--primary-1) 0%, var(--primary-2) 100%);
            color: white;
        }

        .page-header h1 {
            font-size: clamp(1.6rem, 4vw, 3rem);
            margin-bottom: 1rem;
            font-weight: 800;
        }

        .page-header p {
            font-size: clamp(.95rem, 1.6vw, 1.2rem);
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 clamp(1rem, 2vw, 2rem);
        }

        /* Community Groups */
        .community-section {
            padding: clamp(2rem, 4vw, 4rem) 0;
        }

        .section-title {
            text-align: center;
            font-size: clamp(1.4rem, 3vw, 2.5rem);
            margin-bottom: 2rem;
            color: var(--text);
            font-weight: 700;
        }

        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.25rem;
            margin-bottom: 2.5rem;
        }

        .group-card {
            background: white;
            border-radius: var(--card-radius);
            padding: 1.25rem;
            box-shadow: 0 8px 24px rgba(0,0,0,0.06);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            position: relative;
            overflow: hidden;
            display:flex;
            flex-direction:column;
            gap: .75rem;
        }

        .group-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-1), var(--primary-2));
        }

        .group-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(0,0,0,0.10);
        }

        .group-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: .5rem;
        }

        .group-icon {
            font-size: 1.6rem;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
            border-radius: 12px;
            color: white;
        }

        .group-info h3 {
            font-size: 1.05rem;
            color: var(--text);
            margin-bottom: 0.25rem;
        }

        .group-stats {
            display: flex;
            gap: .75rem;
            font-size: .9rem;
            color: var(--muted);
        }

        .group-description {
            color: #5a6c7d;
            margin-bottom: .5rem;
            line-height: 1.6;
            flex:1;
        }

        .group-features {
            list-style: none;
            margin-bottom: 0.75rem;
            padding-left: 0;
        }

        .group-features li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.4rem;
            color: #5a6c7d;
        }

        .group-features li::before {
            content: '‚úÖ';
            font-size: 0.9rem;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.18);
        }

        /* Chat Preview */
        .chat-preview {
            background: white;
            border-radius: 15px;
            padding: clamp(1rem, 2.5vw, 2rem);
            margin-top: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.06);
        }

        .chat-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: .5rem;
            border-bottom: 1px solid #ecf0f1;
        }

        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
            display:flex;
            flex-direction:column;
            gap: .5rem;
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.75rem;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .message-avatar {
            min-width:40px;
            min-height:40px;
            width:40px;
            height:40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink:0;
        }

        .message-content { flex:1; }

        .message-header {
            display: flex;
            align-items: center;
            gap: .75rem;
            margin-bottom: 0.35rem;
        }

        .message-author {
            font-weight: 600;
            color: var(--text);
            font-size:.95rem;
        }

        .message-time { font-size: .8rem; color: var(--muted); }

        .message-text { color: #5a6c7d; line-height: 1.5; }

        .chat-input {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            padding: .75rem 1rem;
            border: 2px solid #ecf0f1;
            border-radius: 25px;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .chat-input input:focus { outline: none; border-color: var(--primary-1); }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.15s ease;
            flex-shrink:0;
        }

        .send-btn:hover { transform: scale(1.05); }

        /* Guidelines */
        .community-guidelines {
            background: white;
            border-radius: var(--card-radius);
            padding: 1.25rem;
            margin-top: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.06);
        }

        .guidelines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .guideline-item {
            text-align: center;
            padding: 1rem;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.06), rgba(118, 75, 162, 0.06));
        }

        .guideline-item .icon { font-size: 2rem; margin-bottom: .5rem; }
        .guideline-item h4 { color: var(--text); margin-bottom: .5rem; }
        .guideline-item p { color: var(--muted); font-size: .9rem; }

        /* Focus states & accessibility */
        button:focus, a:focus, input:focus { outline: 3px solid rgba(102,126,234,0.14); outline-offset: 3px; border-radius: 8px; }

        /* Responsive */
        @media (max-width: 768px) {
            .page-header h1 { font-size: clamp(1.4rem, 6vw, 2rem); }
            .groups-grid { grid-template-columns: 1fr; gap: .9rem; }
            .message { padding: .5rem; flex-direction:row; }
            .guidelines-grid { grid-template-columns: 1fr; }

            /* Mobile nav behavior */
            .nav-toggle { display: block; }
            .nav-links {
              position: fixed;
              top: 64px; /* height of nav */
              right: 0;
              width: 86%;
              max-width: 320px;
              height: calc(100% - 64px);
              background: rgba(255,255,255,0.98);
              padding: 1.5rem;
              box-shadow: -10px 0 30px rgba(0,0,0,0.12);
              transform: translateX(110%);
              transition: transform 0.28s ease;
              display: block;
              z-index: 200;
              flex-direction: column;
              align-items: flex-start;
              gap: 1rem;
              border-left: 1px solid rgba(0,0,0,0.03);
              overflow-y:auto;
            }
            .nav-links.open { transform: translateX(0); }
            .nav-links li { width:100%; }
            .nav-links a { display:block; width:100%; padding: .75rem 1rem; }
            .auth-buttons { flex-direction: column; gap: .5rem; width:100%; }
            .btn { width:100%; }
        }

        @media (max-width:420px) {
            .nav-links { width: 92%; max-width: 300px; }
            .chat-messages { max-height: 260px; }
        }

        /* Auth modal styles */
        #authModal { display:none; align-items:center; justify-content:center; }
        #authModal > div { box-shadow: 0 20px 60px rgba(0,0,0,0.18); }

    </style>
</head>
<body>
    <a class="skip-link" href="#main" tabindex="0" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">Skip to content</a>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">üåü <span>Breaking Cycles</span></a>

            <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="navLinks" aria-label="Open menu">‚ò∞</button>

            <ul class="nav-links" id="navLinks" role="menu" aria-hidden="true">
    <li><a href="#home" class="nav-link active" data-section="home">Home</a></li>
    <li><a href="#learn" class="nav-link" data-section="learn">Learn</a></li>
    <li><a href="#community" class="nav-link" data-section="community">Community</a></li>
    <li><a href="#stories" class="nav-link" data-section="stories">Stories</a></li>
    <li><a href="#contact" class="nav-link" data-section="contact">Contact</a></li>

    <li class="auth-buttons" style="display: flex; gap: 1rem;">
        <button type="button" class="btn-login" data-action="open-auth" data-mode="login">Login</button>
        <button type="button" class="btn-signup" data-action="open-auth" data-mode="signup">Sign Up</button>
    </li>

    <li class="user-menu">
        <div class="user-dropdown" style="position:relative;">
            <div class="user-avatar" id="userAvatar" tabindex="0" aria-haspopup="true" aria-expanded="false">
                U
                <span class="badge-indicator" id="badgeCount" style="display:none;">0</span>
            </div>
            <div class="dropdown-menu" id="userDropdown" style="display:none; position:absolute; right:0; top:calc(100% + .5rem); background:white; padding:.5rem; border-radius:8px; box-shadow:0 8px 24px rgba(0,0,0,0.08); min-width:160px;">
                <div class="dropdown-item" style="font-weight: 600; color: var(--primary-1);" id="userName">User</div>
                <div class="dropdown-item" data-section="learn" style="cursor:pointer; padding:.5rem 0;">My Courses</div>
                <div class="dropdown-item" id="adminLink" style="display:none; padding:.5rem 0; cursor:pointer;">Admin Panel</div>
                <div class="dropdown-item" id="logoutBtn" style="padding:.5rem 0; cursor:pointer;">Logout</div>
            </div>
        </div>
    </li>
</ul>
        </div>
    </nav>

    <!-- Page Header -->
    <section id="home" class="page-header">
        <h1>Community Hub</h1>
        <p>Connect, share experiences, and support each other on your journey to breaking cycles and building better futures.</p>
    </section>

    <main id="main">
    <!-- Community Groups -->
    <section id="community" class="community-section">
        <div class="container">
            <h2 class="section-title">Join Your Community</h2>

            <div class="groups-grid">
                <!-- Young Mothers Group -->
                <div class="group-card">
                    <div class="group-header">
                        <div class="group-icon">üë∂</div>
                        <div class="group-info">
                            <h3>Young Mothers Circle</h3>
                            <div class="group-stats">
                                <span>üí¨ 342 members</span>
                                <span>üìà Active today</span>
                            </div>
                        </div>
                    </div>
                    <p class="group-description">
                        A supportive space for young mothers to share experiences, parenting tips, and navigate education while raising children. Find balance, support, and inspiration from mothers just like you.
                    </p>
                    <ul class="group-features">
                        <li>Daily check-ins and support</li>
                        <li>Childcare resource sharing</li>
                        <li>Study group coordination</li>
                        <li>Work-life balance tips</li>
                        <li>Mental health support</li>
                    </ul>
                    <a href="#chat" class="btn" data-section="chat">Join Chat Room</a>
                </div>

                <!-- Disabled Girls Group -->
                <div class="group-card">
                    <div class="group-header">
                        <div class="group-icon">‚ôø</div>
                        <div class="group-info">
                            <h3>Empowered Abilities</h3>
                            <div class="group-stats">
                                <span>üí¨ 186 members</span>
                                <span>üåü Growing daily</span>
                            </div>
                        </div>
                    </div>
                    <p class="group-description">
                        Celebrating abilities, sharing resources, and creating opportunities for girls and women with disabilities. Together, we break barriers and build inclusive futures filled with potential.
                    </p>
                    <ul class="group-features">
                        <li>Accessibility resource library</li>
                        <li>Adaptive learning strategies</li>
                        <li>Career mentorship program</li>
                        <li>Assistive technology tips</li>
                        <li>Advocacy and rights education</li>
                    </ul>
                    <a href="#chat" class="btn" data-section="chat">Join Chat Room</a>
                </div>

                <!-- General Support Group -->
                <div class="group-card">
                    <div class="group-header">
                        <div class="group-icon">ü§ù</div>
                        <div class="group-info">
                            <h3>Sisters Supporting Sisters</h3>
                            <div class="group-stats">
                                <span>üí¨ 567 members</span>
                                <span>üî• Very active</span>
                            </div>
                        </div>
                    </div>
                    <p class="group-description">
                        Our main community for all women breaking cycles of poverty, trauma, and limitation. Share your story, celebrate wins, and find the encouragement you need to keep pushing forward.
                    </p>
                    <ul class="group-features">
                        <li>Weekly success celebrations</li>
                        <li>Goal-setting accountability</li>
                        <li>Resource and opportunity sharing</li>
                        <li>Mentor-mentee matching</li>
                        <li>Crisis support network</li>
                    </ul>
                    <a href="#chat" class="btn" data-section="chat">Join Chat Room</a>
                </div>
            </div>

            <!-- Live Chat Preview -->
            <div class="chat-preview" id="chat">
                <div class="chat-header">
                    <div class="group-icon" style="font-size: 1.2rem; width: 38px; height: 38px;">üë∂</div>
                    <div>
                        <h3>Young Mothers Circle - Live Chat</h3>
                        <p style="color: var(--muted); font-size: 0.9rem;">24 members online</p>
                    </div>
                </div>

                <div class="chat-messages" aria-live="polite">
                    <div class="message">
                        <div class="message-avatar">AM</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Aisha M.</span>
                                <span class="message-time">2 hours ago</span>
                            </div>
                            <p class="message-text">Just wanted to share - I finally submitted my college application today! It took months of studying while my little one napped, but we did it!</p>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">SL</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Sarah L.</span>
                                <span class="message-time">1 hour ago</span>
                            </div>
                            <p class="message-text">@Aisha That's incredible! You're such an inspiration. I'm still working up the courage to start my coding course. How do you manage study time?</p>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">RK</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Rose K.</span>
                                <span class="message-time">45 min ago</span>
                            </div>
                            <p class="message-text">Ladies, I found an amazing free childcare resource for study sessions! Sharing the link in our resources channel. We've got this! üåü</p>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">MM</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Munana M. (Founder)</span>
                                <span class="message-time">30 min ago</span>
                            </div>
                            <p class="message-text">So proud of this community! Remember, every small step counts. You're not just changing your life - you're changing your children's future too.</p>
                        </div>
                    </div>
                </div>

                <div class="chat-input">
                    <input type="text" placeholder="Share your thoughts, ask questions, or celebrate a win..." id="messageInput" aria-label="Chat message">
                    <button class="send-btn" id="sendBtn" aria-label="Send message">üì§</button>
                </div>
            </div>

            <!-- Community Guidelines -->
            <div class="community-guidelines" id="guidelines">
                <h2 class="section-title" style="margin-bottom: 1rem;">Community Guidelines</h2>
                <p style="text-align: center; color: var(--muted); margin-bottom: 1rem;">
                    Our community thrives on respect, support, and shared growth. Let's create a safe space for everyone.
                </p>

                <div class="guidelines-grid">
                    <div class="guideline-item">
                        <div class="icon">üíù</div>
                        <h4>Be Kind & Supportive</h4>
                        <p>Lift each other up. We're all on different parts of the same journey.</p>
                    </div>
                    <div class="guideline-item">
                        <div class="icon">üîí</div>
                        <h4>Respect Privacy</h4>
                        <p>What's shared here stays here. Protect each other's stories and struggles.</p>
                    </div>
                    <div class="guideline-item">
                        <div class="icon">üåà</div>
                        <h4>Embrace Diversity</h4>
                        <p>All backgrounds, abilities, and experiences are welcome and valued here.</p>
                    </div>
                    <div class="guideline-item">
                        <div class="icon">üìö</div>
                        <h4>Share Knowledge</h4>
                        <p>Share resources, opportunities, and lessons learned to help others grow.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Learn (placeholder) -->
    <section id="learn" class="community-section" aria-label="Learn">
      <div class="container">
        <h2 class="section-title">Learn</h2>
        <p style="text-align:center;color:var(--muted);max-width:800px;margin:0 auto;">
          Find free and low-cost courses, step-by-step learning paths, and curated resources to help you build skills and confidence.
        </p>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:1rem;">
          <div class="group-card">
            <h3>Foundations Course</h3>
            <p class="group-description">Short guided lessons on computing, numeracy, and confidence-building.</p>
            <a class="btn" href="#">Start Learning</a>
          </div>
          <div class="group-card">
            <h3>Career Paths</h3>
            <p class="group-description">Guides and mentorship for job-readiness and entrepreneurship.</p>
            <a class="btn" href="#">Explore</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Stories -->
    <section id="stories" class="community-section" aria-label="Stories">
      <div class="container">
        <h2 class="section-title">Stories</h2>
        <p style="text-align:center;color:var(--muted);max-width:800px;margin:0 auto;">
          Read real stories from community members ‚Äî their challenges and successes.
        </p>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem;margin-top:1rem;">
          <div class="group-card">
            <h3>From Student to Graduate</h3>
            <p class="group-description">A short story about perseverance and community support.</p>
          </div>
          <div class="group-card">
            <h3>Small Business Win</h3>
            <p class="group-description">How mentorship helped a member launch a micro-business.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="community-section" aria-label="Contact">
      <div class="container">
        <h2 class="section-title">Contact</h2>
        <p style="text-align:center;color:var(--muted);max-width:800px;margin:0 auto;">
          Need help or want to volunteer? Send us a message.
        </p>

        <div style="max-width:720px;margin:1rem auto;">
          <form id="contactForm">
            <div style="display:flex;flex-direction:column;gap:.5rem;">
              <label for="contactName">Your name</label>
              <input id="contactName" name="name" type="text" required style="padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;">
              <label for="contactEmail">Email</label>
              <input id="contactEmail" name="email" type="email" required style="padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;">
              <label for="contactMessage">Message</label>
              <textarea id="contactMessage" name="message" rows="5" required style="padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;"></textarea>
              <div style="display:flex;gap:.5rem;">
                <button class="btn" type="submit">Send Message</button>
              </div>
              <div id="contactStatus" style="color:var(--muted);font-size:.95rem;margin-top:.5rem;display:none;"></div>
            </div>
          </form>
        </div>
      </div>
    </section>

    </main>

    <!-- Simple Auth Modal (Login / Signup) -->
    <div id="authModal" role="dialog" aria-modal="true" aria-hidden="true" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:9999;">
      <div style="background:white;border-radius:12px;padding:1.25rem;max-width:420px;width:92%;">
        <button id="authClose" aria-label="Close" style="float:right;background:transparent;border:none;font-size:1.2rem;cursor:pointer;">‚úï</button>
        <h3 id="authTitle">Login</h3>
        <form id="authForm">
          <div style="display:flex;flex-direction:column;gap:.5rem;margin-top:1rem;">
            <input id="authEmail" type="email" placeholder="Email" required style="padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;">
            <input id="authPassword" type="password" placeholder="Password" required style="padding:.75rem;border:2px solid #ecf0f1;border-radius:8px;">
            <button class="btn" type="submit">Continue</button>
          </div>
        </form>
        <p style="font-size:.9rem;color:var(--muted);margin-top:.75rem;">This is a UI stub. Connect to your auth backend to sign users in & up.</p>
      </div>
    </div>

    <script>
        /* -------------------------
           Core interactive behavior
           - Mobile nav toggle
           - Navigation binding (data-section)
           - Chat handling
           - Card animations
           - User dropdown handling
           - Auth modal + contact form handlers
           ------------------------- */

        // Send message function (kept simple)
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (message) {
                const chatMessages = document.querySelector('.chat-messages');
                const newMessage = document.createElement('div');
                newMessage.className = 'message';
                newMessage.innerHTML = `
                    <div class="message-avatar">YU</div>
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-author">You</span>
                            <span class="message-time">Just now</span>
                        </div>
                        <p class="message-text"></p>
                    </div>
                `;
                newMessage.querySelector('.message-text').textContent = message;

                chatMessages.appendChild(newMessage);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                input.value = '';
                input.focus();
            }
        }

        // Robust showSection - scrolls to an element with given id, or logs if not found
        function showSection(section) {
            if (!section) return;
            const el = document.getElementById(section);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // mark active nav-link
                document.querySelectorAll('.nav-link').forEach(a => a.classList.toggle('active', a.dataset.section === section));
            } else {
                console.log('showSection: no element with id', section);
            }
        }

        // User dropdown toggle
        function toggleUserDropdown() {
            const dd = document.getElementById('userDropdown');
            const avatar = document.getElementById('userAvatar');
            const visible = dd.style.display === 'block';
            dd.style.display = visible ? 'none' : 'block';
            avatar.setAttribute('aria-expanded', String(!visible));
        }

        // Logout stub (adapt to your auth)
        function logout() {
            console.log('Logout clicked (implement auth integration)');
            // Example: window.location = '/logout';
        }

        document.addEventListener('DOMContentLoaded', function () {
            // NAV TOGGLE
            const navToggle = document.getElementById('navToggle');
            const navLinks = document.getElementById('navLinks');

            function setNavOpen(open) {
                navToggle.setAttribute('aria-expanded', String(open));
                navLinks.setAttribute('aria-hidden', String(!open));
                if (open) navLinks.classList.add('open');
                else navLinks.classList.remove('open');
            }

            navToggle.addEventListener('click', function (e) {
                e.stopPropagation();
                const expanded = navToggle.getAttribute('aria-expanded') === 'true';
                setNavOpen(!expanded);
            });

            // close nav when clicking outside
            document.addEventListener('click', function (e) {
                if (!navLinks.contains(e.target) && !navToggle.contains(e.target)) {
                    setNavOpen(false);
                }
            });

            // Bind links (data-section)
            document.querySelectorAll('.nav-link, .dropdown-item[data-section], a[data-section]').forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    if (section) showSection(section);
                    // close mobile nav after click
                    setNavOpen(false);
                });
            });

            // Attach send handlers
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.addEventListener('click', sendMessage);

            const messageInput = document.getElementById('messageInput');
            messageInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Simple animation for group cards
            const cards = document.querySelectorAll('.group-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(12px)';
                card.style.transition = 'all 0.48s cubic-bezier(.2,.9,.2,1)';
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 120 + index * 120);
            });

            // Auto-scroll chat messages to bottom
            const chatMessages = document.querySelector('.chat-messages');
            if (chatMessages) chatMessages.scrollTop = chatMessages.scrollHeight;

            // User dropdown interactions
            const userAvatar = document.getElementById('userAvatar');
            const userDropdown = document.getElementById('userDropdown');
            userAvatar.addEventListener('click', function (e) {
                e.stopPropagation();
                toggleUserDropdown();
            });
            // close userdropdown on outside click
            document.addEventListener('click', function () {
                if (userDropdown.style.display === 'block') {
                    userDropdown.style.display = 'none';
                    userAvatar.setAttribute('aria-expanded', 'false');
                }
            });

            // Logout button
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) logoutBtn.addEventListener('click', logout);

            // Open auth modal stub (replace with real modal implementation)
            const authModal = document.getElementById('authModal');
            const authTitle = document.getElementById('authTitle');
            const authForm = document.getElementById('authForm');
            const authClose = document.getElementById('authClose');

            function openAuth(mode = 'login') {
                if (!authModal) return console.warn('authModal missing');
                authModal.style.display = 'flex';
                authModal.setAttribute('aria-hidden', 'false');
                authTitle.textContent = mode === 'signup' ? 'Sign Up' : 'Login';
                // focus first input
                document.getElementById('authEmail').focus();
            }
            function closeAuth() {
                if (!authModal) return;
                authModal.style.display = 'none';
                authModal.setAttribute('aria-hidden', 'true');
                document.querySelector('.btn-login')?.focus();
            }

            document.querySelectorAll('[data-action="open-auth"]').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    const mode = this.dataset.mode || 'login';
                    openAuth(mode);
                });
            });
            if (authClose) authClose.addEventListener('click', closeAuth);
            if (authModal) authModal.addEventListener('click', function (e) { if (e.target === authModal) closeAuth(); });
            if (authForm) authForm.addEventListener('submit', function (e) { e.preventDefault(); console.log('Auth submitted', { email: authForm.authEmail?.value, mode: authTitle.textContent }); closeAuth(); });

            // Contact form handling
            const contactForm = document.getElementById('contactForm');
            const contactStatus = document.getElementById('contactStatus');
            if (contactForm) {
                contactForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    const data = { name: contactForm.name?.value, email: contactForm.email?.value, message: contactForm.message?.value };
                    contactStatus.style.display = 'block';
                    contactStatus.style.color = 'green';
                    contactStatus.textContent = 'Thanks ‚Äî your message was received (demo).';
                    contactForm.reset();
                });
            }

            // ensure Escape closes modal too
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    setNavOpen(false);
                    if (userDropdown.style.display === 'block') {
                        userDropdown.style.display = 'none';
                        userAvatar.setAttribute('aria-expanded', 'false');
                    }
                    if (authModal && authModal.style.display === 'flex') closeAuth();
                }
            });
        });
    </script>
</body>
</html>
